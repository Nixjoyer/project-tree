# ProjTree

ProjTree is a small, deterministic utility that generates a Markdown representation of a project’s directory structure. It produces stable, predictable output and optionally watches the filesystem for structural changes.

---

## Features

* Generates a deterministic Markdown project tree
* Uses a **simple, explicit ignore system** based on exact name matching
* Optional **watch mode** for continuous regeneration
* Minimal, testable, and robust design

---

## Installation

### 1. Clone the repository

```bash
git clone https://github.com/Nixjoyer/project-tree.git
```

### 2. Install the package

> **Note:** Due to Python packaging restrictions, installation should be performed inside a virtual environment or via a system-level package manager that supports global installs.

#### **Option A: Editable install (recommended for development)**

```bash
pip install -e /path/to/repo/clone
```

This installs `projtree` in **editable mode**, so changes to the code are reflected immediately.

#### **Option B: Standard install**

```bash
pip install /path/to/repo/clone
```

This installs `projtree` as a normal package.

> **Note:** The `watchdog` dependency is a required runtime dependency and is installed automatically.

### 3. Optional development dependencies

To run the test suite with `pytest`:

```bash
pip install .[dev]
```

This installs `pytest`, which is **only required for running tests** and is not needed for normal usage.

---

## Usage

After installation, the `projtree` command is available **within the environment where it was installed**.

```bash
projtree [path] [options]
```

### Positional Arguments

* `path` – Root directory of the project (default: current directory)

#### Example Usage

Generate a project tree in the current directory:

```bash
projtree
```

Generate a project tree for a specific directory:

```bash
projtree /path/to/project
```

### Options

* `-h, --help` – Show help and exit

```bash
projtree -h
```

```bash
# Output
usage: projtree [-h] [-o OUTPUT] [--ignore IGNORE] [--watch] [--watch-only]
                [path]

Generate a deterministic Markdown project tree.

positional arguments:
  path                 Root directory of the project (default: current
                       directory)

options:
  -h, --help           show this help message and exit
  -o, --output OUTPUT  Change output file name (default: structure.md)
  --ignore IGNORE      Comma-separated list of file or directory names to
                       ignore
  --watch              Watch filesystem and regenerate on structural changes
  --watch-only         Watch for changes without initial generation
```

* `-o, --output OUTPUT` – Change output name (default: `structure.md`)

```bash
projtree -o tree.md
```

* `--ignore IGNORE` – Comma-separated list of file or directory names to ignore

> **Note**: Make sure the directories aren't marked with `/`

```bash
# Incorrect usage
projtree --ignore node_modules/, __pycache__/

# Correct Usage
projtree --ignore node_modules,__pycache__
```

> **Alternatively:** Add your files and directories to the custom `.projtreeignore` file

```text
.venv
__pycache__
.git
projtree.egg-info
.pytest_cache
```

* `--watch` – Watch filesystem and regenerate on structural changes

```bash
# Runs until cancelled
projtree --watch
```

* `--watch-only` – Watch without initial generation (requires `--watch`)

```bash
projtree --watch --watch-only
```

---

### Example Output

```text
# Project Structure

_Generated by projtree_

.
├── projtree
│   ├── __init__.py
│   ├── cli.py
│   ├── generator.py
│   ├── ignore.py
│   └── watcher.py
├── tests
│   ├── test_basic_tree.py
│   ├── test_watcher_basic.py
│   └── utils.py
├── .gitignore
├── .projtreeignore
├── LICENSE
├── pyproject.toml
└── structure.md
```

---

## Ignore System

* Built-in defaults include common directory and file names (e.g. `.git`, `__pycache__`, `node_modules`)
* A `.projtreeignore` file in the project root is supported
* CLI `--ignore` arguments are merged with project and built-in ignores
* Ignore rules match **exact names only** (no globbing or path-based patterns)
* The output file itself is always ignored to prevent infinite regeneration loops

---

## Running Tests

If you installed development dependencies:

```bash
pytest
```

All generator tests assert against **full output** to enforce deterministic structure.
Watcher tests are intentionally minimal and validate regeneration behavior only.

---

## License

This project is licensed under the MIT License. See [LICENSE](LICENSE) for details.

---
